name: 'Deploy to GitHub Pages'
description: 'This action will handle the deployment process of your project to GitHub Pages.'
author: 'Blayne Dennis <blaynetdennis@gmail.com>'
branding:
  icon: 'git-commit'
  color: 'orange'
inputs:
  token:
    description: 'A GitHub token for pushing to the repo.'
    required: true
    default: ${{ secrets.TOKEN }}

  branch:
    description: 'This is the branch you wish to deploy to, for example gh-pages or docs.'
    required: true
    default: "gh-pages"

  folder:
    description: 'The folder in your repository that you want to deploy. If your build script compiles into a directory named build you would put it here. Folder paths cannot have a leading / or ./. If you wish to deploy the root directory you can place a . here.'
    required: true
    default: "docs/html"
on: 
  push: 
    branches: 
      - main
jobs:
  deploy-to-gh-pages:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          submodules: "true"
      - name: Install Doxygen
        run: sudo apt-get install doxygen -y
      - name: Generate Doxygen Documentation
        run: doxygen
      - name: Create .nojekyll
        run: touch ${{ inputs.folder }}/.nojekyll
      - name: Deploy to GitHub Pages
        uses: JamesIves/github-pages-deploy-action@4.3.3
        with:
          github_token: ${{ inputs.token }}
          branch: ${{ inputs.branch }}
          folder: ${{ inputs.folder }}
