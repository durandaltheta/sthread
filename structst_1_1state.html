<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>simple thread: st::state Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">simple thread
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>st</b></li><li class="navelem"><a class="el" href="structst_1_1state.html">state</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="structst_1_1state-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">st::state Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="simple__thread_8hpp_source.html">simple_thread.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst_1_1state_1_1machine.html">machine</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a740834a32ddfdf58105f00d6d9bccacf"><td class="memItemLeft" align="right" valign="top">virtual std::shared_ptr&lt; <a class="el" href="structst_1_1message.html">message</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst_1_1state.html#a740834a32ddfdf58105f00d6d9bccacf">enter</a> (std::shared_ptr&lt; <a class="el" href="structst_1_1message.html">message</a> &gt; event)</td></tr>
<tr class="memdesc:a740834a32ddfdf58105f00d6d9bccacf"><td class="mdescLeft">&#160;</td><td class="mdescRight">called during a transition when a state is entered  <a href="structst_1_1state.html#a740834a32ddfdf58105f00d6d9bccacf">More...</a><br /></td></tr>
<tr class="separator:a740834a32ddfdf58105f00d6d9bccacf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450771b125b1a1ba9b3ccc2dc07b959c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst_1_1state.html#a450771b125b1a1ba9b3ccc2dc07b959c">exit</a> (std::shared_ptr&lt; <a class="el" href="structst_1_1message.html">message</a> &gt; event)</td></tr>
<tr class="memdesc:a450771b125b1a1ba9b3ccc2dc07b959c"><td class="mdescLeft">&#160;</td><td class="mdescRight">called during a transition when a state is exitted  <a href="structst_1_1state.html#a450771b125b1a1ba9b3ccc2dc07b959c">More...</a><br /></td></tr>
<tr class="separator:a450771b125b1a1ba9b3ccc2dc07b959c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0d92dec99c8d4af418c76d5d377228"><td class="memItemLeft" align="right" valign="top">virtual std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structst_1_1state.html#ace0d92dec99c8d4af418c76d5d377228">type_code</a> () const final</td></tr>
<tr class="separator:ace0d92dec99c8d4af418c76d5d377228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27880ddf7cf5d96562f58b4586ee6ae6"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a27880ddf7cf5d96562f58b4586ee6ae6"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structst_1_1state.html#a27880ddf7cf5d96562f58b4586ee6ae6">is</a> () const</td></tr>
<tr class="separator:a27880ddf7cf5d96562f58b4586ee6ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae4ee7ee1d9035c37b4ed5f875c90fad8"><td class="memTemplParams" colspan="2">template&lt;typename T , typename... As&gt; </td></tr>
<tr class="memitem:ae4ee7ee1d9035c37b4ed5f875c90fad8"><td class="memTemplItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="structst_1_1state.html">state</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structst_1_1state.html#ae4ee7ee1d9035c37b4ed5f875c90fad8">make</a> (As &amp;&amp;... as)</td></tr>
<tr class="memdesc:ae4ee7ee1d9035c37b4ed5f875c90fad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">a convenience function for generating shared_ptr's to state objects  <a href="structst_1_1state.html#ae4ee7ee1d9035c37b4ed5f875c90fad8">More...</a><br /></td></tr>
<tr class="separator:ae4ee7ee1d9035c37b4ed5f875c90fad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A fairly simple finite state machine mechanism (FSM). FSMs are somewhat infamous for being difficult to parse, too unwieldy, or otherwise opaque. As with everything else in this library, the aim of this object's design is to make sure the necessary features are kept simple without overly limiting the user. Therefore some care has been attempted to mitigate those concerns.</p>
<p>The toplevel class for this feature is actually the inheritable <code>state</code> object. The user should implement classes which publicly inherit <code><a class="el" href="structst_1_1state.html">st::state</a></code>, overriding its <code><a class="el" href="structst_1_1state.html#a740834a32ddfdf58105f00d6d9bccacf" title="called during a transition when a state is entered">enter()</a></code> and <code><a class="el" href="structst_1_1state.html#a450771b125b1a1ba9b3ccc2dc07b959c" title="called during a transition when a state is exitted">exit()</a></code> methods as desired. A static <code><a class="el" href="structst_1_1state.html#ae4ee7ee1d9035c37b4ed5f875c90fad8" title="a convenience function for generating shared_ptr&#39;s to state objects">state::make()</a></code> function is included as convenience for the user so they do not have to manually typecast allocated pointers when constructing state objects.</p>
<p>The user must create a state machine (<code>std::shared_ptr&lt;<a class="el" href="structst_1_1state_1_1machine.html">st::state::machine</a>&gt;</code>) using static function <code>st:;<a class="el" href="structst_1_1state_1_1machine.html#aac682462827df8851a8941b2084fb757">state::machine::make()</a></code> to register their states and trigger events. The state machine can then be notified of new events with a call to <code><a class="el" href="structst_1_1state_1_1machine.html#afe52547025c774ee4d64bf260089cc90" title="process_event the state machine an event has occurred">st::state::machine::process_event</a>(std::shared_ptr&lt;<a class="el" href="structst_1_1message.html" title="Interthread type erased message container.">st::message</a>&gt;)</code>. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a740834a32ddfdf58105f00d6d9bccacf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740834a32ddfdf58105f00d6d9bccacf">&#9670;&nbsp;</a></span>enter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::shared_ptr&lt;<a class="el" href="structst_1_1message.html">message</a>&gt; st::state::enter </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="structst_1_1message.html">message</a> &gt;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>called during a transition when a state is entered </p>
<p>The returned value from this function can contain a further event to process. Thus, this function can be used to implement transitory states where logic must occur before the next state is known. If the returned value is a null pointer, the transition will be considered complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>a message containing the event id and an optional data payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>optional shared_ptr&lt;message&gt; containing the next event to process (if pointer is null, no futher event will be processed) </dd></dl>

</div>
</div>
<a id="a450771b125b1a1ba9b3ccc2dc07b959c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450771b125b1a1ba9b3ccc2dc07b959c">&#9670;&nbsp;</a></span>exit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool st::state::exit </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="structst_1_1message.html">message</a> &gt;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>called during a transition when a state is exitted </p>
<p>The return value determines whether the transition from the current state will be allowed to continue. Thus, this function can be used to implement transition guards.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>a message containing the event id and an optional data payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if exit succeeded and transition can continue, else false </dd></dl>

</div>
</div>
<a id="a27880ddf7cf5d96562f58b4586ee6ae6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27880ddf7cf5d96562f58b4586ee6ae6">&#9670;&nbsp;</a></span>is()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool st::state::is </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine whether the state implementation type matches the templated type.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the unqualified type of T matches the data type of the state implementation, else false </dd></dl>

</div>
</div>
<a id="ae4ee7ee1d9035c37b4ed5f875c90fad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ee7ee1d9035c37b4ed5f875c90fad8">&#9670;&nbsp;</a></span>make()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename... As&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="structst_1_1state.html">state</a>&gt; st::state::make </td>
          <td>(</td>
          <td class="paramtype">As &amp;&amp;...&#160;</td>
          <td class="paramname"><em>as</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>a convenience function for generating shared_ptr's to state objects </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">as</td><td>Constructor arguments for type T </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an allocated shared_ptr to type T implementing state </dd></dl>

</div>
</div>
<a id="ace0d92dec99c8d4af418c76d5d377228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0d92dec99c8d4af418c76d5d377228">&#9670;&nbsp;</a></span>type_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::size_t st::state::type_code </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function returns the a type code representing the <em>derived</em> type of the state object. Therefore, this value can be used to compare the types of two arbitrary <code>std::shared_ptr&lt;<a class="el" href="structst_1_1state.html">st::state</a>&gt;</code> pointer objects.</p>
<dl class="section return"><dt>Returns</dt><dd>the code representing the state implementation type </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>inc/<a class="el" href="simple__thread_8hpp_source.html">simple_thread.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
